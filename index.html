<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ultimate Guide to Deploying Multiple Flask Apps on a VPS with Docker</title>

    <!-- Prism JS for Syntax Highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.2.0/themes/prism-okaidia.min.css" rel="stylesheet" />
    
    <style>
        /* --- THEME VARIABLES & GENERAL STYLING --- */
        :root {
            --bg-color: #f8f9fa;
            --main-bg-color: #ffffff;
            --text-color: #212529;
            --heading-color: #0056b3;
            --link-color: #007bff;
            --border-color: #dee2e6;
            --code-bg: #e9ecef;
            --code-text: #212529;
            --toc-bg: #e9f5ff;
            --toc-border: #007bff;
            --info-bg: #fff3cd;
            --info-border: #ffeeba;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --pre-bg: #2d2d2d; /* Okaidia theme background */
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --main-bg-color: #1e1e1e;
            --text-color: #e0e0e0;
            --heading-color: #61afef;
            --link-color: #56b6c2;
            --border-color: #333;
            --code-bg: #2c2c2c;
            --code-text: #e0e0e0;
            --toc-bg: #2a3b4c;
            --toc-border: #61afef;
            --info-bg: #3e382b;
            --info-border: #b08900;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.7;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: 17px;
            transition: background-color 0.3s, color 0.3s;
        }

        /* --- LAYOUT & MAIN CONTENT --- */
        .container { max-width: 960px; margin: 0 auto; padding: 1rem 2rem; }
        .page-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; border-bottom: 1px solid var(--border-color); }
        main { padding: 2rem 0; }
        .content-card { background-color: var(--main-bg-color); border-radius: 12px; box-shadow: var(--shadow); padding: 2rem 3rem; }

        /* --- TYPOGRAPHY & ELEMENTS --- */
        h1, h2, h3, h4 { color: var(--heading-color); line-height: 1.3; }
        h1 { font-size: 2.5rem; margin-bottom: 0.5rem; text-align: center; }
        h2 { font-size: 2rem; border-bottom: 1px solid var(--border-color); padding-bottom: 0.75rem; margin-top: 3rem; }
        h3 { font-size: 1.5rem; margin-top: 2.5rem; }
        p, li { font-size: 1.05rem; }
        a { color: var(--link-color); text-decoration: none; }
        a:hover { text-decoration: underline; }
        
        code {
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
            background-color: var(--code-bg); color: var(--code-text);
            padding: 0.2em 0.4em; border-radius: 4px; font-size: 0.9em;
        }

        /* --- SYNTAX HIGHLIGHTING & COPY BUTTON --- */
        pre {
            background-color: var(--pre-bg); padding: 1.5rem; border-radius: 8px;
            overflow-x: auto; position: relative; font-size: 0.95rem; line-height: 1.5; margin: 1.5rem 0;
        }
        pre code { background-color: transparent; padding: 0; color: #ccc; }
        .token.comment, .token.prolog, .token.doctype, .token.cdata { color: #6a9955 !important; }

        .copy-button {
            position: absolute; top: 12px; right: 12px; background-color: #4a505c;
            color: #e2e2e2; border: none; padding: 8px 12px; border-radius: 5px;
            cursor: pointer; font-size: 0.85rem; opacity: 0;
            transition: opacity 0.2s, background-color 0.2s;
        }
        pre:hover .copy-button { opacity: 1; }
        .copy-button:hover { background-color: #5c6370; }

        /* --- CUSTOM BLOCKS --- */
        .toc, .info-box { padding: 1.5rem 2rem; margin: 2rem 0; border-left: 5px solid; border-radius: 8px; }
        .toc { background-color: var(--toc-bg); border-color: var(--toc-border); }
        .toc h3 { margin-top: 0; }
        .toc ul { padding-left: 20px; margin: 0; }
        .toc li { margin-bottom: 0.5rem; }
        .info-box { background-color: var(--info-bg); border-color: var(--info-border); }
        .info-box p:last-child { margin-bottom: 0; }
        .info-box ul { margin-bottom: 0; }

        /* --- THEME TOGGLE SWITCH --- */
        .theme-switch-wrapper { display: flex; align-items: center; }
        .theme-switch { display: inline-block; height: 24px; position: relative; width: 48px; }
        .theme-switch input { display:none; }
        .slider { background-color: #ccc; bottom: 0; cursor: pointer; left: 0; position: absolute; right: 0; top: 0; transition: .4s; }
        .slider:before { background-color: #fff; bottom: 4px; content: ""; height: 16px; left: 4px; position: absolute; transition: .4s; width: 16px; }
        input:checked + .slider { background-color: #61afef; }
        input:checked + .slider:before { transform: translateX(24px); }
        .slider.round { border-radius: 24px; }
        .slider.round:before { border-radius: 50%; }

        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 768px) {
            .container { padding: 1rem; }
            .content-card { padding: 1.5rem; }
            h1 { font-size: 2rem; }
            h2 { font-size: 1.7rem; }
        }

        .guide-button {
            display: block;
            background-color: #28a745;
            color: white !important;
            text-align: center;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            text-decoration: none;
            margin: 3rem 0;
            transition: background-color 0.2s, transform 0.2s;
        }
        .guide-button:hover {
            background-color: #218838;
            text-decoration: none;
            transform: translateY(-2px);
        }
        [data-theme="dark"] .guide-button {
            background-color: #3b9c52;
        }
        [data-theme="dark"] .guide-button:hover {
            background-color: #328345;
        }
    </style>
</head>
<body>

    <header class="page-header">
        <h4>A Professional Guide</h4>
        <div class="theme-switch-wrapper">
            <span>‚òÄÔ∏è</span>
            <label class="theme-switch" for="checkbox">
                <input type="checkbox" id="checkbox" />
                <div class="slider round"></div>
            </label>
            <span>üåô</span>
        </div>
    </header>

    <div class="container">
        <main>
            <div class="content-card">
                <header style="text-align:center; margin-bottom: 3rem;">
                    <h1>Deploying Multiple Flask Apps on a VPS with Docker</h1>
                    <p>A Scalable, Modular, and Secure Production Setup</p>
                </header>

                <nav class="toc">
                    <h3>Table of Contents</h3>
                    <ul>
                        <li><a href="#section-1">Prerequisites</a></li>
                        <li><a href="#section-2">The Architecture: A Modular "Hub and Spoke" Model</a></li>
                        <li><a href="#section-3">Part 1: Initial Server Setup</a></li>
                        <li><a href="#section-4">Part 2: Configuring the Central Proxy Manager</a></li>
                        <li><a href="#section-5">Part 3: Building Your First Flask App</a></li>
                        <li><a href="#section-6">Part 4: The Deployment Workflow</a></li>
                        <li><a href="#section-7">Part 5: Scaling with a Second App</a></li>
                        <li><a href="#section-8">Part 6: Ongoing Management</a></li>
                        <li><a href="#section-9">Part 7: Decommissioning the Project</a></li>
                    </ul>
                </nav>

                <section id="section-1">
                    <h2>Prerequisites</h2>
                    <ul>
                        <li><strong>A VPS (Virtual Private Server):</strong> A fresh server running **Ubuntu 22.04** or newer.</li>
                        <li><strong>A Domain Name:</strong> To point to your server for SSL certificates.</li>
                        <li><strong>An SFTP Client:</strong> A tool like <a href="https://filezilla-project.org/" target="_blank">FileZilla</a> to upload files.</li>
                    </ul>
                </section>

                <section id="section-2">
                    <h2>The Architecture: A Modular "Hub and Spoke" Model</h2>
                    <p>Instead of one massive, confusing configuration file, we will adopt a professional, modular approach. This makes managing multiple apps clean, safe, and scalable.</p>
                    <ul>
                        <li><strong>The Shared Network:</strong> We will create a single, persistent Docker network. This acts as a virtual private network inside our server, allowing different projects to communicate securely.</li>
                        <li><strong>The Hub (Proxy Manager):</strong> A dedicated project for Nginx Proxy Manager. It connects to the shared network and acts as the single, secure entry point for all web traffic from the internet.</li>
                        <li><strong>The Spokes (Your Apps):</strong> Each Flask application will be a self-contained project in its own folder, with its own `docker-compose.yml`. Each app project will connect to the shared network, allowing the Hub to forward traffic to it.</li>
                    </ul>
                    <div class="info-box">
                        <p><strong>Why is this better?</strong></p>
                        <ul>
                            <li><strong>Isolation:</strong> You can update, restart, or even break one app without affecting any of the others.</li>
                            <li><strong>Clarity:</strong> An app's entire configuration lives with its code.</li>
                            <li><strong>Scalability:</strong> The process for managing 2 apps is the same as for 20.</li>
                        </ul>
                    </div>
                </section>
                
                <section id="section-3">
                    <h2>Part 1: Initial Server Setup</h2>
                    <h3>Step 1: Connect, Install Docker & Configure Firewall</h3>
                    <p>Log into your VPS and install Docker. This is the only software we need on the host machine.</p>
                    <pre><code class="language-bash"># Connect to your server
ssh root@YOUR_SERVER_IP

# Update package list and install Docker
apt-get update
apt-get install -y docker.io docker-compose-v2
</code></pre>
                    <div class="info-box">
                        <p><strong>Important Firewall Configuration:</strong> Before proceeding, log in to your VPS provider's dashboard and configure its firewall. You must **ALLOW inbound TCP traffic** on these ports:
                            <ul>
                                <li><strong>Port 22:</strong> For SSH (so you don't lock yourself out!)</li>
                                <li><strong>Port 80:</strong> For HTTP and SSL certificate validation.</li>
                                <li><strong>Port 443:</strong> For secure HTTPS traffic.</li>
                                <li><strong>Port 81:</strong> For the Nginx Proxy Manager admin panel.</li>
                            </ul>
                        </p>
                    </div>
                    
                    <h3>Step 2: Create the Shared Docker Network</h3>
                    <p>This crucial one-time command creates the private network our containers will use to communicate.</p>
                    <pre><code class="language-bash"># This network will persist even if containers are stopped or removed.
docker network create nginx-proxy
</code></pre>

                    <h3>Step 3: Create the Project Directory Structure</h3>
                    <p>On your server, create the following directories. This organization keeps everything tidy.</p>
                    <pre><code class="language-bash"># Create the main directory for all our projects
mkdir -p /root/docker-deployment/apps

# Create the directory for our central proxy manager
mkdir /root/docker-deployment/proxy-manager
</code></pre>
                </section>

                <section id="section-4">
                    <h2>Part 2: Configuring the Central Proxy Manager</h2>
                    <p>This is our "Hub". It will handle SSL and route traffic to our apps. Create the file <code>/root/docker-deployment/proxy-manager/docker-compose.yml</code> on your server and add the following content:</p>
                    <pre><code class="language-yaml"># /root/docker-deployment/proxy-manager/docker-compose.yml
services:
  proxy:
    image: 'jc21/nginx-proxy-manager:latest'
    container_name: nginx-proxy-manager
    restart: unless-stopped
    ports:
      # These ports map from the HOST to the CONTAINER (HOST:CONTAINER)
      - '80:80'    # Public HTTP
      - '443:443'  # Public HTTPS
      - '81:81'    # Admin Panel
    volumes:
      # Persist data and SSL certificates on the host machine
      - ./data:/data
      - ./letsencrypt:/etc/letsencrypt
    networks:
      # Connect this service to our shared network
      - nginx-proxy

# This section tells Docker that 'nginx-proxy' is a pre-existing network
# and should not be created by this file.
networks:
  nginx-proxy:
    external: true
</code></pre>
                </section>

                <section id="section-5">
                    <h2>Part 3: Building Your First Flask App</h2>
                    <p>Now we build our first "Spoke". All of the following files should be created on your local machine first, inside a folder named `flask_app_1`. You will then upload this entire folder to the server.</p>

                    <h3>Project Structure for <code>flask_app_1</code></h3>
                    <p>This structure now includes a `public` folder for serving files like `robots.txt` from the domain root.</p>
                    <pre><code class="language-text">flask_app_1/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ robots.txt
‚îÇ   ‚îî‚îÄ‚îÄ sitemap.xml
‚îú‚îÄ‚îÄ static/css/style.css
‚îú‚îÄ‚îÄ templates/index.html
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ nginx.conf
‚îî‚îÄ‚îÄ docker-compose.yml
</code></pre>

                    <h4>File 1: <code>app.py</code> (The Flask App)</h4>
                    <pre><code class="language-python"># flask_app_1/app.py
from flask import Flask, render_template

app = Flask(__name__)

@app.route("/")
def index():
    return render_template("index.html")
</code></pre>
                    
                    <h4>File 2: <code>templates/index.html</code></h4>
                    <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Flask App One&lt;/title&gt;
    &lt;link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;h1&gt;Welcome to Flask App One!&lt;/h1&gt;
        &lt;p&gt;Served by Nginx, running in an isolated Docker container.&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>

                    <h4>File 3: <code>static/css/style.css</code></h4>
                    <pre><code class="language-css">body { font-family: sans-serif; background-color: #f0f2f5; color: #333; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
.container { text-align: center; background-color: white; padding: 40px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
h1 { color: #0056b3; }
</code></pre>
                    
                    <h4>File 4: <code>requirements.txt</code></h4>
                    <pre><code class="language-text">flask
gunicorn
</code></pre>
                    
                    <h4>File 5: <code>Dockerfile</code> (The Production-Ready Blueprint)</h4>
                    <p>This Dockerfile builds your Flask application. It copies all project files into the image, including the initial versions of your static and template files.</p>
                    <pre><code class="language-dockerfile"># Start with a modern, lightweight, official Python image.
FROM python:3.12-slim
WORKDIR /app
RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*
COPY requirements.txt .
RUN curl -LsSf https://astral.sh/uv/install.sh | sh && \
    /root/.local/bin/uv pip install --no-cache-dir --system -r requirements.txt
COPY . .
CMD ["gunicorn", "--workers", "3", "--bind", "0.0.0.0:8000", "app:app"]
</code></pre>
                    
                    <h4>File 6: <code>nginx.conf</code> (Internal Proxy & Static Server)</h4>
                    <p>This Nginx configuration now includes rules to serve root-level files like `robots.txt` directly. This is faster and is the correct way to handle these common files.</p>
                    <pre><code class="language-nginx">server {
    listen 80;

    # Rule for serving specific root files (e.g., for SEO).
    # The '=' makes this an exact and high-priority match.
    location = /robots.txt { root /app/public; }
    location = /sitemap.xml { root /app/public; }

    # Rule for serving the /static directory.
    # Nginx is much faster at this than Flask.
    location /static {
        alias /app/static;
    }

    # Rule to pass all other requests to the Flask application.
    location / {
        proxy_pass http://app_one:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>

                    <h4>File 7: <code>docker-compose.yml</code> (App-Specific Control File)</h4>
                    <p>This file is updated to link the new `public` folder into the Nginx container, allowing it to serve the root files.</p>
                    <pre><code class="language-yaml"># flask_app_1/docker-compose.yml
services:
  app_one:
    container_name: flask_app_one_app
    build: .
    restart: always
    expose:
      - "8000"
    volumes:
      # This "live links" the host folders to the container folders.
      # Changes to these files on the server are reflected instantly inside the container.
      - ./static:/app/static
      - ./templates:/app/templates
    networks:
      - nginx-proxy

  nginx_app_one:
    container_name: flask_app_one_nginx
    image: nginx:latest
    restart: always
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      # The Nginx container ALSO needs live access to static files to serve them.
      - ./static:/app/static
      # Give Nginx access to the public folder for serving root files.
      - ./public:/app/public
    depends_on:
      - app_one
    networks:
      - nginx-proxy

networks:
  nginx-proxy:
    external: true
</code></pre>
                </section>

                <section id="section-6">
                    <h2>Part 4: The Deployment Workflow</h2>
                    <h3>Step 1: Upload Your App Project</h3>
                    <p>Using an SFTP client like FileZilla, upload your entire local `flask_app_1` folder to the `/root/docker-deployment/apps/` directory on your server.</p>

                    <h3>Step 2: Launch the Proxy Manager (The Hub)</h3>
                    <p>This only needs to be done once. Navigate to its directory and start it.</p>
                    <pre><code class="language-bash">cd /root/docker-deployment/proxy-manager
docker compose up -d
</code></pre>

                    <h3>Step 3: Launch Your Flask App (The Spoke)</h3>
                    <p>Now, navigate to your app's directory and start its services. The `--build` flag tells Docker to build the image from your Dockerfile the first time.</p>
                    <pre><code class="language-bash">cd /root/docker-deployment/apps/flask_app_1
docker compose up --build -d
</code></pre>

                    <h3>Step 4: Configure Domain and SSL in the UI</h3>
                    <p>This is the final step to make your site live. We tell the Proxy Manager how to find and secure your app.</p>
                    <ol>
                        <li>Open your browser to <code>http://YOUR_SERVER_IP:81</code>.</li>
                        <div class="info-box" style="margin-top: 1rem;">
                            <p><strong>Security Pro Tip:</strong> Before proceeding, consider giving the admin panel itself a secure domain name. This is highly recommended for long-term use instead of accessing it via an IP address.</p>
                            <a href="secure-npm-guide.html" class="guide-button" style="background-color: #ffc107; color: #212529 !important; margin-top: 1rem; margin-bottom: 0; font-size: 1rem; padding: 0.75rem 1rem;">
                                Learn How to Secure the Admin Panel with a Domain/SSL
                            </a>
                        </div>
                        <li>Log in (<code>admin@example.com</code> / <code>changeme</code>) and immediately change your credentials.</li>
                        <li>Go to <strong>Hosts &rarr; Proxy Hosts</strong> and click "Add Proxy Host".</li>
                        <li><strong>Details Tab:</strong>
                            <ul>
                                <li><strong>Domain Names:</strong> <code>app1.yourdomain.com</code></li>
                                <li><strong>Scheme:</strong> <code>http</code></li>
                                <li><strong>Forward Hostname / IP:</strong> <code>nginx_app_one</code> (This MUST match the service name of the internal Nginx in your app's `docker-compose.yml`).</li>
                                <li><strong>Forward Port:</strong> <code>80</code></li>
                            </ul>
                        </li>
                        <li><strong>SSL Tab:</strong>
                             <ul>
                                <li><strong>SSL Certificate:</strong> Select "Request a new SSL Certificate".</li>
                                <li>Turn on <strong>"Force SSL"</strong>.</li>
                                <li>Agree to the Terms of Service and click <strong>Save</strong>.</li>
                            </ul>
                        </li>
                    </ol>
                    <p>‚ú® After about a minute, your site will be live and secure at <code>https://app1.yourdomain.com</code>!</p>
                </section>
                
                <a href="database-guide.html" class="guide-button">
                    Next Step: See the Guide to Set Up a Central MySQL Database & phpMyAdmin
                </a>

                <section id="section-7">
                    <h2>Part 5: Scaling with a Second App</h2>
                    <p>Here's where our modular architecture shines. Adding another app is incredibly simple.</p>
                    <ol>
                        <li>On your local machine, copy the `flask_app_1` folder and rename it to `flask_app_2`.</li>
                        <li>Modify the code in `flask_app_2` (e.g., change the text in `index.html`).</li>
                        <li><strong>Crucially, edit <code>flask_app_2/docker-compose.yml</code>.</strong> Give the services unique names to avoid conflicts.
                        <pre><code class="language-yaml"># flask_app_2/docker-compose.yml
services:
  app_two: # Renamed from app_one
    container_name: flask_app_two_app # Unique container name
    build: .
    restart: always
    expose: [ "8000" ]
    volumes:
      - ./static:/app/static
      - ./templates:/app/templates
      # Don't forget to include the public folder if needed for the second app!
      - ./public:/app/public
    networks: [ "nginx-proxy" ]
  nginx_app_two: # Renamed from nginx_app_one
    container_name: flask_app_two_nginx # Unique container name
    image: nginx:latest
    restart: always
    volumes:
      - ./nginx.conf:/etc/nginx/conf.d/default.conf
      - ./static:/app/static
      - ./public:/app/public
    depends_on: [ "app_two" ] # Point to the new service name
    networks: [ "nginx-proxy" ]
networks:
  nginx-proxy: { external: true }
</code></pre>
                        <p>Also, update `flask_app_2/nginx.conf` to point to the new service name `app_two` and add the root file rules:</p>
                        <pre><code class="language-nginx"># in flask_app_2/nginx.conf
server {
    listen 80;

    location = /robots.txt { root /app/public; }
    location = /sitemap.xml { root /app/public; }
    location /static { alias /app/static; }
    
    location / {
        proxy_pass http://app_two:8000;
        # ... proxy_set_header lines ...
    }
}
</code></pre>
                        </li>
                        <li>Upload the `flask_app_2` folder to `/root/docker-deployment/apps/`.</li>
                        <li>SSH into your server, navigate to the new app's directory, and launch it:
                        <pre><code class="language-bash">cd /root/docker-deployment/apps/flask_app_2
docker compose up --build -d
</code></pre>
                        </li>
                        <li>Go back to the Nginx Proxy Manager UI and add another proxy host for <code>app2.yourdomain.com</code>, but this time set the <strong>Forward Hostname</strong> to <code>nginx_app_two</code>.</li>
                    </ol>
                </section>
                
                <section id="section-8">
                    <h2>Part 6: Ongoing Management</h2>
                    
                    <h3>The Two Types of Application Updates</h3>
                    <p>With this professional setup, there are two distinct workflows for updating your application, depending on what you change.</p>

                    <h4>Type 1: Updating Static/Public Files or Templates (Instant Update)</h4>
                    <p>This applies when you change files in the <code>static</code>, <code>public</code>, or <code>templates</code> folders.</p>
                    <ol>
                        <li>Upload your modified files to the server using FileZilla or File Browser.</li>
                        <li>Refresh the page in your browser. The changes will appear instantly.</li>
                    </ol>
                    <div class="info-box">
                       <p><strong>How does this work?</strong> The `volumes` in your `docker-compose.yml` create a live link between the folders on your server and the folders inside the running containers. The containers see your changes in real-time. No restart is needed.</p>
                    </div>

                    <h4>Type 2: Updating Python Code or Dependencies (Requires Rebuild)</h4>
                    <p>This applies when you change your <code>.py</code> files (like `app.py`), your <code>requirements.txt</code>, or the `Dockerfile` itself.</p>
                    <ol>
                        <li>Upload your modified files to the server.</li>
                        <li>SSH into your server and navigate to the specific application's directory.</li>
                        <li>Run the `up` command with the `--build` flag to rebuild the image and restart the service.
                        <pre><code class="language-bash"># Example for updating the first app's Python code
cd /root/docker-deployment/apps/flask_app_1
docker compose up --build -d
</code></pre>
                        </li>
                    </ol>
                    
                    <h3>Deleting a Single Application</h3>
                    <p>If you want to completely remove a single app (e.g., `flask_app_1`) to start fresh, follow these steps in order.</p>
                    <ol>
                        <li><strong>Remove the Proxy Host:</strong> First, log into Nginx Proxy Manager and delete the proxy host that points to your application (e.g., `app1.yourdomain.com`).</li>
                        <li><strong>Take Down the Docker Services:</strong> SSH into your server, navigate to the app's directory, and run the `down` command.
                            <pre><code class="language-bash">cd /root/docker-deployment/apps/flask_app_1
docker compose down -v
</code></pre>
                        </li>
                        <li><strong>Delete the Project Files:</strong> Once the containers are stopped and removed, you can safely delete the entire project directory.
                            <div class="info-box" style="border-color: #dc3545;">
                                <p><strong>‚ö†Ô∏è Warning:</strong> This command is irreversible and will permanently delete the application's folder and all of its contents.</p>
                            </div>
                            <pre><code class="language-bash">cd /root/docker-deployment/apps
rm -rf flask_app_1
</code></pre>
                        </li>
                    </ol>
                    <p>The application has now been completely removed.</p>

                    <h3>Useful Commands</h3>
                    <p>Run these from within a specific project's directory (`proxy-manager` or `apps/flask_app_1`, etc.)</p>
                    <pre><code class="language-bash"># List running containers for the current project
docker compose ps

# Stop and remove containers for the current project
docker compose down

# View real-time logs for a specific service (e.g., the Flask app)
docker compose logs -f app_one
</code></pre>

                    <h3>Optional: Visual Management with Portainer</h3>
                    <p>While the command line is powerful, a graphical user interface (GUI) like <strong>Portainer</strong> is excellent for day-to-day monitoring of container status, logs, and resource usage.</p>
                    <div class="info-box">
                        <p><strong>The Hybrid Workflow:</strong> A highly effective professional workflow is to use the <strong>command line for deployments and rebuilds</strong> and use <strong>Portainer for monitoring and quick management</strong> (like restarting a single container).</p>
                    </div>

                    <a href="portainer-guide.html" class="guide-button" style="background-color: #007bff; margin-top: 2rem;">
                        See the Guide to Set Up Portainer for Visual Management
                    </a>

                    <a href="docker-management-guide.html" class="guide-button" style="background-color: #6c757d; margin-top: 1rem;">
                        Advanced Docker Management: Images, Pruning, and Cleanup
                    </a>

                </section>

                <section id="section-more-services">
                    <h2>More Self-Hosted Services</h2>
                    <p>
                        The modular architecture you've built makes it easy to add more useful, self-contained services.
                    </p>

                    <a href="wg-easy-guide.html" class="guide-button" style="background-color: #6f42c1;">
                        Optional: Set Up a WG-Easy VPN Server
                    </a>

                    <a href="heimdall-guide.html" class="guide-button" style="background-color: #17a2b8; margin-top: 1rem;">
                        Optional: Set Up a Heimdall Application Dashboard
                    </a>

                    <a href="filebrowser-guide.html" class="guide-button" style="background-color: #fd7e14; margin-top: 1rem;">
                        Optional: Set Up a Web-Based File Manager
                    </a>

                    <a href="remote_desktop.html" class="guide-button" style="background-color: #e66000; margin-top: 1rem;">
                        Optional: Set Up a Webtop Remote Desktop
                    </a>
                </section>

                <section id="section-9">
                    <h2>Part 7: Decommissioning the Project</h2>
                    <p>To cleanly remove everything from your server, follow these steps in order.</p>
                     <ol>
                        <li><strong>Take Down Each App:</strong> Navigate into each app directory and run `down -v`.
                             <pre><code class="language-bash">cd /root/docker-deployment/apps/flask_app_1
docker compose down -v
cd /root/docker-deployment/apps/flask_app_2
docker compose down -v
# Repeat for any other apps...
</code></pre>
                        </li>
                         <li><strong>Take Down the Proxy Manager:</strong>
                             <pre><code class="language-bash">cd /root/docker-deployment/proxy-manager
docker compose down -v
</code></pre>
                         </li>
                         <li><strong>Remove the Shared Network:</strong>
                            <pre><code class="language-bash">docker network rm nginx-proxy
</code></pre>
                         </li>
                         <li><strong>Delete the Project Folder:</strong>
                             <pre><code class="language-bash"># Be very careful! This deletes everything inside the project folder.
rm -rf /root/docker-deployment
</code></pre>
                         </li>
                    </ol>
                </section>
            </div>
        </main>
    </div>

    <!-- Scripts at the end of the body -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre').forEach(pre => {
                const code = pre.querySelector('code');
                if (code) {
                    const button = document.createElement('button');
                    button.innerText = 'Copy';
                    button.className = 'copy-button';
                    pre.appendChild(button);
                    button.addEventListener('click', () => {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerText = 'Copied!';
                            setTimeout(() => { button.innerText = 'Copy'; }, 2000);
                        });
                    });
                }
            });

            const themeToggle = document.getElementById('checkbox');
            const currentTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const applyTheme = (theme) => {
                document.documentElement.setAttribute('data-theme', theme);
                themeToggle.checked = theme === 'dark';
            };
            if (currentTheme) { applyTheme(currentTheme); } 
            else if (prefersDark) { applyTheme('dark'); }
            themeToggle.addEventListener('change', function() {
                const theme = this.checked ? 'dark' : 'light';
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            });
        });
    </script>
</body>
</html>